buildscript {
    repositories {
        maven { url 'http://maven.aliyun.com/nexus/content/groups/public' }
    }

    dependencies {
		classpath 'com.moowork.gradle:gradle-node-plugin:1.1.1'
    }

}
project(':ui') {

	apply plugin: 'java'
    apply plugin: 'com.moowork.node'
	version '1.0-SNAPSHOT'

    task cnpmInstall(type: NpmTask) {
        group = 'node'
        args = ['install', '--registry=https://registry.npm.taobao.org']
    }

    // 测试包部署
    task buildUI(type: NpmTask, dependsOn: cnpmInstall) {
        group = 'node'
        args = ['run', 'build']
    }

    // 生产包部署
    task buildUIProd(type: NpmTask) {
      group = 'node'
      args = ['run', 'build:prod']
    }
    jar.dependsOn buildUI
}
